(function(){const m=["hm.baidu.com","p.qlogo.cn","q2.qlogo.cn","kittensgame.com","www.google-analytics.com"],h=location.host;var f=["https://hyx3179.github.io/%%/","https://cdn.jsdelivr.net/gh/hyx3179/%%@gh-pages/","https://cat-zh-hyx3179.netlify.app/%%/"];-1==f.toString().indexOf(h)&&f.push(location.origin+"/%%/");const n=a=>{a=new URL(a);let b=[];if(a.host!==h)a=new Request(a.href,{mode:"cors"}),b.push(a);else{var d=a.pathname.split("/").filter(c=>0<c.length);for(let c in f){let e=[...d],g=f[c].replace(/%%/,
e.shift());e=e.join("/");if(1<f[c].indexOf("jsdelivr")&&!e)continue;let k=-1==g.indexOf(h)?"cors":"no-cors";b.push(new Request(g+e+a.search,{mode:k}))}}return b},p=a=>{let b=[];for(let d in a)b.push(fetch(a[d],{cache:"no-store"}).then(c=>c.ok?c:new Promise(function(e){setTimeout(e,5E3,c)})));return b};addEventListener("install",a=>{a.waitUntil(caches.open("cat-3").then(b=>b.add("/cat-zh/")))});addEventListener("activate",a=>{a.waitUntil(Promise.all([clients.claim(),caches.keys().then(b=>Promise.all(b.filter(d=>
{d=d.split("-");return 2==d.length&&"cat"===d[0]&&d[1]!==(3).toString()}).map(d=>caches.delete(d))))]))});addEventListener("fetch",a=>{const b=new URL(a.request.url);if(!(-1<m.indexOf(b.host))){var d=b.host!==h?"catStaticRes":"cat-3",c=n(b.href);a.respondWith(caches.match(c[0]).then(e=>e&&e.ok?e:Promise.race(p(c)).then(g=>{const k=g.clone();Promise.all([k,caches.open(d)]).then(([q,l])=>{-1==c[0].url.indexOf("fonts.g")&&l.delete(c[0],{ignoreSearch:!0});l.put(c[0],q)});return g})))}})})();
