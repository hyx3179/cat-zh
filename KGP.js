$(function(){window.KGPInterval=void 0;initKGP()});
function initKGP(){"enable"!==localStorage["zh.kgp.enable"]||window.KGPInterval?KGPInterval&&(clearInterval(KGPInterval),window.KGPInterval=void 0,initKGPLeftColumn(!1),document.getElementById("KGPBorder").remove()):game.resPool?(KGP.resMap=game.resPool.resourceMap,window.KGPInterval=setInterval(()=>initKGPLeftColumn(),200),$('<style type="text/css" id="KGPBorder">.res-table { border-spacing: 0px 3px; }</style>').appendTo("head")):setTimeout(()=>initKGP(),500)}
function initKGPLeftColumn(a=!0){const e=$("#leftColumnViewport > div > div:nth-child(1) > div:nth-child(2) > div").find(".res-row"),c=KGP.resMap;e.each(function(b,d){if(!a)return d.removeAttribute("style");b=d.className.split(" ")[1].substring(9);"kittens"!==b&&"zebras"!==b&&(d=$(d),(b=c[b])&&KGP.changeCSS(b.value,b.maxValue,d))});KGP.updateTooltip()}
window.KGP={resMap:void 0,resRow:void 0,tool:void 0,updateTooltip:function(){let a=this.resMap;if(game.tooltipUpdateFunc){let e=game.tooltipUpdateFunc,c=$("#tooltip").find(".price-block");e.length||(game.tooltipUpdateFunc=b=>{e();KGP.updateTooltip()});c.each((b,d)=>{var g=d.textContent;b=g.replace("/","");if(b!==g){d=$(d);b=b.replace("*"," ");b=b.replace("+"," ");b=b.trim().split(" ");g=b[0];let p=g.length,h;for(let f=0;f<p;f++)if(parseFloat(g[f])+1){var k=g.substring(0,f);h=g.substring(f,p);break}let m=
KGP.getAmountFromFormatted(b[2]);h=KGP.getAmountFromFormatted(h);if(4>b.length){let f,q;switch(k){case "\u773c\u6cea":k=d.find(".noRes");k.text((l,n)=>{l=2500*Math.ceil((m-h)/game.bld.getBuildingExt("ziggurat").meta.on);let r=a.unicorns.perTickCached;if(0<l-a.unicorns.value&&r)return l=(l-a.unicorns.value)/(game.getTicksPerSecondUI()*r),n+" ("+game.toDisplaySeconds(l)+")"});break;case "\u53cd\u7269\u8d28":f=game.getEffect("antimatterProduction");m<=a.antimatter.maxValue&&f&&(k=d.find(".noRes"),k.text((l,
n)=>n+" ("+Math.ceil((m-h)/f)+"\u6e38\u620f\u5e74)"));break;case "\u9057\u7269":if(q=game.getEffect("relicPerDay"))k=d.find(".noRes"),k.text((l,n)=>n+" ("+game.toDisplaySeconds(Math.ceil((m-h)/q)*(game.time.isAccelerated?1.33:2))+")")}}KGP.changeCSS(h,m,d)}})}},changeCSS:function(a,e,c){0<e&&0<a&&(a=100*a/e,c.css("background-repeat","no-repeat"),c.css("background-position","bottom left"),c.css("background-size",Math.min(200,a)+"% 1px"),95<a?c.css("background-image","linear-gradient(0, red, red)"):
75<a?c.css("background-image","linear-gradient(0, orange, orange)"):c.css("background-image","linear-gradient(0, green, green)"))},getAmountFromFormatted:function(a){if(!a)return 0;const e=a.slice(-1),c=!isNaN(Number(e));a=c?Number(a):Number(a.substring(0,a.length-1));if(c)return a;switch(e){case "K":return 1E3*a;case "M":return 1E6*a;case "G":return 1E9*a;case "T":return 1E12*a;case "P":return 1E15*a;default:return 0}}};
