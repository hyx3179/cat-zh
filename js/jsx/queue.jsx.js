WQueueItem=React.createClass({componentDidMount:function(){this.attachTooltip()},render:function(){var a=this.props.item;buttons=a.value?[$r("a",{href:"#",onClick:this.removeOne},"[-]"),$r("a",{href:"#",onClick:this.removeAll},"[x]")]:[$r("a",{href:"#",onClick:this.removeOne},"[x]")];return $r("div",{},["["+a.type+"]["+a.name+"] - ",$r("span",{ref:"itemLabel",className:"queue-label"},a.label),a.value?" "+a.value:""].concat(buttons))},removeOne:function(){this.props.queueManager.remove(this.props.index,
1)},removeAll:function(){this.props.queueManager.remove(this.props.index,this.props.item.value)},attachTooltip:function(){var a=this.props.item,b=this.props.game,c=React.findDOMNode(this.refs.itemLabel);if("buildings"==a.type){var d=new classes.ui.btn.BuildingBtnModernController(b);a=d.fetchModel({building:a.name,key:a.name});UIUtils.attachTooltip(b,c,0,200,dojo.partial(ButtonModernHelper.getTooltipHTML,d,a))}}});
WQueue=React.createClass({getInitialState:function(){return{typeId:"buildings",itemId:null,itemLabel:null,game:this.props.game}},componentDidMount:function(){var a=this;this.onUpdateHandler=dojo.subscribe("ui/update",function(b){a.setState({game:b})})},getQueueTypeSelect:function(){var a=[],b=this,c=game.time.queue.queueSourcesArr,d;for(d in c)a.push($r("option",{value:c[d].name},c[d].label));return $r("select",{value:this.state.queueTypeId,onChange:function(e){e=e.target.value;b.setState({typeId:e});
e=game.time.queue.getQueueOptions(e);e.length&&b.setState({itemId:0,itemLabel:e[0].label})}},a)},getQueueItemSelect:function(a){var b=this,c=[],d;for(d in a){var e=a[d];c.push($r("option",{value:d,"data-label":e.label},e.label))}a.length||c.push($r("option",{},"-"));return $r("select",{value:this.state.itemId,onChange:function(f){b.setState({itemId:f.target.value,itemLabel:a[f.target.value].label})}},c)},getQueueItems:function(){var a=[],b=this.state.game.time.queue,c=b.queueItems,d;for(d in c)a.push($r(WQueueItem,
{item:c[d],index:d,queueManager:b,game}));return $r("div",{},a)},toggleAlphabetical:function(){game.time.queue.toggleAlphabeticalSort();this.render()},render:function(){var a=this,b=game.time.queue.getQueueOptions(this.state.typeId);return $r("div",{className:"queue-container"},[this.getQueueTypeSelect(),this.getQueueItemSelect(b),$r("button",{onClick:function(c){a.state.itemId?game.time.queue.addToQueue(b[a.state.itemId].name,a.state.typeId,a.state.itemLabel,c.shiftKey):b.length&&game.time.queue.addToQueue(b[0].name,
a.state.typeId,b[0].label,c.shiftKey);a.forceUpdate()}},"Add to queue"),$r("div",{className:"alphabetical-toggle"},[$r("input",{type:"checkbox",checked:game.time.queue.alphabeticalSort,onClick:a.toggleAlphabetical,style:{display:"inline-block"}}),$I("queue.alphabeticalToggle")]),this.getQueueItems()])}});
