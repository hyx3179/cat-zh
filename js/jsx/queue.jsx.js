WQueue=React.createClass({getInitialState:function(){return{typeId:"buildings",itemId:null,itemLabel:null,game:this.props.game}},componentDidMount:function(){var b=this;this.onUpdateHandler=dojo.subscribe("ui/update",function(d){b.setState({game:d})})},getQueueTypeSelect:function(){var b=[],d=this,c=game.time.queue.queueSourcesArr,a;for(a in c)b.push($r("option",{value:c[a].name},c[a].label));return $r("select",{value:this.state.queueTypeId,onChange:function(e){e=e.target.value;d.setState({typeId:e});
e=game.time.queue.getQueueOptions(e);e.length&&d.setState({itemId:0,itemLabel:e[0].label})}},b)},getQueueItemSelect:function(b){var d=this,c=[],a;for(a in b){var e=b[a];console.log();c.push($r("option",{value:a,"data-label":e.label},e.label))}b.length||c.push($r("option",{},"-"));return $r("select",{value:this.state.itemId,onChange:function(f){d.setState({itemId:f.target.value,itemLabel:b[f.target.value].label})}},c)},getQueueItems:function(){var b=[],d=this.state.game.time.queue.queueItems,c;for(c in d){var a=
d[c];buttons=[];buttons=a.value?[$r("a",{href:"#",onClick:dojo.hitch(game.time.queue,game.time.queue.remove,a.type,a.name,c,!1)},"[-]"),$r("a",{href:"#",onClick:dojo.hitch(game.time.queue,game.time.queue.remove,a.type,a.name,c,a.value)},"[x]")]:[$r("a",{href:"#",onClick:dojo.hitch(game.time.queue,game.time.queue.remove,a.type,a.name,c,!1)},"[x]")];b.push($r("div",{},["["+a.type+"]["+a.name+"] - "+a.label+(a.value?" "+a.value:"")].concat(buttons)))}return $r("div",{},b)},toggleAlphabetical:function(){game.time.queue.toggleAlphabeticalSort();
this.render()},render:function(){var b=this,d=game.time.queue.getQueueOptions(this.state.typeId);return $r("div",{},[this.getQueueTypeSelect(),this.getQueueItemSelect(d),$r("button",{onClick:function(c){b.state.itemId?game.time.queue.addToQueue(d[b.state.itemId].name,b.state.typeId,b.state.itemLabel,c.shiftKey):d.length&&game.time.queue.addToQueue(d[0].name,b.state.typeId,d[0].label,c.shiftKey);b.forceUpdate()}},"\u52a0\u5165\u961f\u5217"),$r("div",{className:"alphabetical-toggle"},[$r("input",{type:"checkbox",
checked:game.time.queue.alphabeticalSort,onClick:b.toggleAlphabetical,style:{display:"inline-block"}}),$I("queue.alphabeticalToggle")]),this.getQueueItems()])}});
