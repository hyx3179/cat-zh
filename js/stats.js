dojo.declare("classes.managers.StatsManager",com.nuclearunicorn.core.TabManager,{game:null,stats:[{name:"totalKittens",title:$I("stats.kittens.total"),val:0,unlocked:!0,defaultUnlocked:!0},{name:"kittensDead",title:$I("stats.kittens.dead"),val:0,unlocked:!0,defaultUnlocked:!0},{name:"totalYears",title:$I("stats.years.total"),val:0,unlocked:!0,defaultUnlocked:!0},{name:"totalResets",title:$I("stats.run.number"),val:0,unlocked:!0,defaultUnlocked:!0},{name:"totalParagon",title:$I("stats.paragon.total"),
val:0,unlocked:!1},{name:"eventsObserved",title:$I("stats.events.total"),val:0,unlocked:!1},{name:"unicornsSacrificed",title:$I("stats.unicorns"),val:0,unlocked:!1},{name:"buildingsConstructed",title:$I("stats.buildings"),val:0,unlocked:!1},{name:"totalClicks",title:$I("stats.clicks.total"),val:0,unlocked:!1},{name:"totalTrades",title:$I("stats.trades.total"),val:0,unlocked:!1},{name:"totalCrafts",title:$I("stats.crafts.total"),val:0,unlocked:!1},{name:"averageKittens",title:$I("stats.kittens.avg"),
val:0,calculate:function(a){return 0!=a.stats.getStat("totalYears").val?a.stats.getStat("totalKittens").val/Math.ceil(a.stats.getStat("totalYears").val/100):0},unlocked:!1}],statsCurrent:[{name:"totalTrades",title:$I("stats.trades.current"),val:0,unlocked:!1},{name:"totalCrafts",title:$I("stats.crafts.current"),val:0,unlocked:!1},{name:"averageKittens",title:$I("stats.kittens.current"),val:0,calculate:function(a){return 0!=a.calendar.year?a.resPool.get("kittens").value/Math.ceil(a.calendar.year/100):
0}},{name:"timePlayed",title:$I("stats.time.current"),val:0,calculate:function(a){return a.toDisplaySeconds(a.calendar.trueYear()*a.calendar.seasonsPerYear*a.calendar.daysPerSeason*a.calendar.ticksPerDay/a.ticksPerSecond)},unlocked:!1}],statGroups:null,constructor:function(a){this.game=a;this.statGroups=[{group:this.stats,title:$I("stats.group.all")},{group:this.statsCurrent,title:$I("stats.group.current")}]},resetState:function(){for(var a=0;a<this.stats.length;a++){var c=this.stats[a];c.val=0;c.unlocked=
c.defaultUnlocked||!1}for(a=0;a<this.statsCurrent.length;a++)c=this.statsCurrent[a],c.val=0,c.unlocked=c.defaultUnlocked||!1},save:function(a){a.stats=this.filterMetadata(this.stats,["name","val"]);a.statsCurrent=this.filterMetadata(this.statsCurrent,["name","val"])},load:function(a){this.loadMetadata(this.stats,a.stats);this.loadMetadata(this.statsCurrent,a.statsCurrent)},getStat:function(a){return this.getMeta(a,this.stats)},getStatCurrent:function(a){a=this.getMeta(a,this.statsCurrent);a.calculate&&
(a.val=a.calculate(this.game));return a},resetStatsCurrent:function(){for(var a in this.statsCurrent)this.statsCurrent[a].val=0},unlockAll:function(){for(var a in this.statsCurrent)this.statsCurrent[a].unlocked=!0;for(a in this.stats)this.stats[a].unlocked=!0}});
dojo.declare("classes.tab.StatsTab",com.nuclearunicorn.game.ui.tab,{container:null,constructor:function(a){},render:function(a){this.container=a;this.update()},update:function(){dojo.empty(this.container);for(var a in this.game.stats.statGroups){var c=this.game.stats.statGroups[a];dojo.create("h1",{innerHTML:c.title},this.container);c=c.group;var f=dojo.create("table",{class:"statTable"},this.container),d;for(d in c){var b=c[d];b.calculate&&(b.val=b.calculate(this.game));0!=b.val&&(b.unlocked=!0);
"totalResets"==b.name&&b.val++;var e=dojo.create("tr",null,f);dojo.create("td",{innerHTML:b.unlocked?b.title:"???"},e);dojo.create("td",{innerHTML:b.unlocked?"number"==typeof b.val?this.game.getDisplayValueExt(b.val):b.val:""},e);"totalResets"==b.name&&b.val--}}}});
